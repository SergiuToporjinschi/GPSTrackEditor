<!DOCTYPE html>
<html lang="en">

    <head>
        <style type="text/css">
            html,
            body,
            #basicMap {
                width: 100%;
                height: 100%;
                margin: 0;
            }
        </style>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>QWebChannel Example</title>
        <script src="qrc:///qtwebchannel/qwebchannel.js"></script>
        <script src="ol.js"></script>
        <link rel="stylesheet" href="ol.css">
        <script>
            function init() {
                var map = new ol.Map({
                    target: 'basicMap', // ID of the div element where the map will be rendered
                    layers: [
                        new ol.layer.Tile({
                            source: new ol.source.OSM()
                        })
                    ],
                    view: new ol.View({
                        center: ol.proj.fromLonLat([0, 0]), // Center of the map
                        zoom: 2 // Initial zoom level
                    })
                });
                var coordinates = [
                    [24.19399667, 45.81218000],
                    [24.19401500, 45.81217000],
                    [24.19403167, 45.81216000]
                    // Add more coordinates as needed
                ];

                var lineString = new ol.geom.LineString(coordinates).transform('EPSG:4326', 'EPSG:3857');
                var feature = new ol.Feature({
                    geometry: lineString
                });
                var vectorLayer = new ol.layer.Vector({
                    source: new ol.source.Vector({
                        features: [feature]
                    })
                });
                map.addLayer(vectorLayer);
                var extent = lineString.getExtent();
                map.getView().fit(extent, map.getSize());
            }
        </script>
    </head>

    <body onload="init();">
        <button onclick="callPython()">Call Python</button>
        <p id="result"></p>
        <div id="basicMap"></div>

        <script>
            // Step 3: Connect to the QWebChannel
            new QWebChannel(qt.webChannelTransport, function (channel) {
                var myObject = channel.objects.myObject;

                // Step 3: Function to call Python
                // function callPython() {
                //     var name = prompt("Enter your name:");
                //     var result = myObject.greet(name);
                //     document.getElementById("result").textContent = result;
                // }

                // Step 3: Expose the callPython function to the global scope
                window.callPython = callPython;
            });
        </script>
    </body>

</html>